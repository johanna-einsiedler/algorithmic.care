import{html as p}from"../../htl@0.3.1/index.js";import{format as Ge,parse as Ue}from"../../isoformat@0.2.1/index.js";function C(e){return e==null?null:typeof e=="number"?`${e}px`:`${e}`}function D(e){return{"--input-width":C(e)}}const le={bubbles:!0};function K(e){e.preventDefault()}function te({currentTarget:e}){(e.form||e).dispatchEvent(new Event("input",le))}function be(e){return e.checkValidity()}function P(e){return e}let Je=0;function ne(){return`__ns__-${++Je}`}function z(e,t){if(e)return e=p`<label>${e}`,t!==void 0&&(e.htmlFor=t.id=ne()),e}function Ke(e="\u2261",{label:t="",value:n,reduce:i,disabled:r,required:o=!1,width:l}={}){const c=typeof e=="string"||e instanceof Node;c?(!o&&n===void 0&&(n=0),i===void 0&&(i=(v=0)=>v+1),r=new Set(r?[e]:[]),e=[[e,i]]):(!o&&n===void 0&&(n=null),r=new Set(r===!0?Array.from(e,([v])=>v):r||void 0));const f=p`<form class=__ns__>`;f.addEventListener("submit",K);const u={width:C(l)},m=Array.from(e,([v,g=P])=>{if(typeof g!="function")throw new TypeError("reduce is not a function");return p`<button disabled=${r.has(v)} style=${u} onclick=${$=>{f.value=g(f.value),te($)}}>${v}`});return(t=z(t,c?m[0]:void 0))&&f.append(t),f.append(...m),f.value=n,f}function H(e){return Array.isArray(e)?e:Array.from(e)}function ye(e){return e?typeof e[Symbol.iterator]=="function":!1}function _e(e){if(ye(e.columns))return e.columns;if(e.schema&&ye(e.schema.fields))return Array.from(e.schema.fields,t=>t.name);if(typeof e.columnNames=="function")return e.columnNames()}function G(e){return e==null?"":`${e}`}const re=ie(e=>{const t=V(e);return n=>n==null?"":typeof n=="number"?t(n):n instanceof Date?ue(n):`${n}`}),V=ie(e=>t=>t===0?"0":t.toLocaleString(e)),Ve=re(),Be=V();function ge(e){const t=e.toString(),n=t.length;let i=-1,r;e:for(let o=1;o<n;++o)switch(t[o]){case".":i=r=o;break;case"0":i===0&&(i=o),r=o;break;default:if(!+t[o])break e;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}function ue(e){return Ge(e,"Invalid Date")}function ie(e){let t=ie,n;return(i="en")=>i===t?n:n=e(t=i)}function se(e,t){return B(t)-B(e)||(e<t?-1:e>t?1:e>=t?0:NaN)}function we(e,t){return B(t)-B(e)||(t<e?-1:t>e?1:t>=e?0:NaN)}function B(e){return e!=null&&!Number.isNaN(e)}const Re=([e])=>e,xe=([,e])=>e;function ke({multiple:e,render:t,selectedIndexes:n,select:i}){return function(r,{locale:o,keyof:l=r instanceof Map?Re:P,valueof:c=r instanceof Map?xe:P,format:f=(y=>(b,E,x)=>y(l(b,E,x)))(re(o)),multiple:u,key:m,value:v,disabled:g=!1,sort:$,unique:h,...N}={}){if(typeof l!="function")throw new TypeError("keyof is not a function");if(typeof c!="function")throw new TypeError("valueof is not a function");if(typeof f!="function")throw new TypeError("format is not a function");e!==void 0&&(u=e),$=Ye($);let y=+u;v===void 0&&(v=m!==void 0&&r instanceof Map?y>0?Array.from(m,k=>r.get(k)):r.get(m):void 0),h=!!h,r=H(r);let b=r.map((k,O)=>[l(k,O,r),O]);$!==void 0&&b.sort(([k],[O])=>$(k,O)),h&&(b=[...new Map(b.map(k=>[Qe(k[0]),k])).values()]);const E=b.map(xe);u===!0?y=Math.max(1,Math.min(10,E.length)):y>0?u=!0:(u=!1,y=void 0);const[x,d]=t(r,E,We(r,E,v,u,c),Xe(r,E,g,c),{...N,format:f,multiple:u,size:y});x.addEventListener("input",w),x.addEventListener("change",te),x.addEventListener("submit",K);function w(k){if(k&&k.isTrusted&&x.removeEventListener("change",te),u)v=n(d).map(O=>c(r[O],O,r));else{const O=Ze(d);v=O<0?null:c(r[O],O,r)}}return w(),Object.defineProperty(x,"value",{get(){return v},set(k){if(u){const O=new Set(k);for(const j of d){const q=+j.value;i(j,O.has(c(r[q],q,r)))}}else d.value=E.find(O=>k===c(r[O],O,r));w()}})}}function We(e,t,n,i,r){const o=new Set(n===void 0?[]:i?H(n):[n]);if(!o.size)return()=>!1;const l=new Set;for(const c of t)o.has(r(e[c],c,e))&&l.add(c);return c=>l.has(c)}function Xe(e,t,n,i){if(typeof n=="boolean")return n;const r=new Set(H(n)),o=new Set;for(const l of t)r.has(i(e[l],l,e))&&o.add(l);return l=>o.has(l)}function Ye(e){if(!(e===void 0||e===!1)){if(e===!0||e==="ascending")return se;if(e==="descending")return we;if(typeof e=="function")return e;throw new TypeError("sort is not a function")}}function Ze(e){return e.value?+e.value:-1}function Qe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Ne(e,t){return ke({multiple:e,render(n,i,r,o,{format:l,label:c}){const f=p`<form class="__ns__ __ns__-checkbox">
      ${z(c)}<div>
        ${i.map(u=>p`<label><input type=${t} disabled=${typeof o=="function"?o(u):o} name=input value=${u} checked=${r(u)}>${l(n[u],u,n)}`)}
      </div>
    </form>`;return[f,rt(f.elements.input,e)]},selectedIndexes(n){return Array.from(n).filter(i=>i.checked).map(i=>+i.value)},select(n,i){n.checked=i}})}const et=Ne(!1,"radio"),tt=Ne(!0,"checkbox");function nt({label:e,value:t,values:n,disabled:i}={}){const r=p`<input class=__ns__-input type=checkbox name=input disabled=${i}>`,o=p`<form class="__ns__ __ns__-toggle">${z(e,r)}${r}`;return Object.defineProperty(o,"value",{get(){return n===void 0?r.checked:n[r.checked?0:1]},set(l){r.checked=n===void 0?!!l:l===n[0]}}),t!==void 0&&(o.value=t),o}function rt(e,t){return e===void 0?new it(t?[]:null):typeof e.length>"u"?new(t?at:ot)(e):e}let it=class{constructor(t){this._value=t}get value(){return this._value}set value(t){}*[Symbol.iterator](){}},ot=class{constructor(t){this._input=t}get value(){const{_input:t}=this;return t.checked?t.value:""}set value(t){const{_input:n}=this;n.checked||(n.checked=G(t)===n.value)}*[Symbol.iterator](){yield this._input}},at=class{constructor(t){this._input=t,this._value=t.checked?[t.value]:[]}get value(){return this._value}set value(t){const{_input:n}=this;n.checked||(n.checked=G(t)===n.value,this._value=n.checked?[n.value]:[])}*[Symbol.iterator](){yield this._input}};function ce(e){if(e===void 0)return[null,null];const t=ne();return[p`<datalist id=${t}>${Array.from(e,n=>p`<option value=${G(n)}>`)}`,t]}function R(e,t,n,{validate:i=be,submit:r}={},{get:o=u=>u.value,set:l=(u,m)=>u.value=G(m),same:c=(u,m)=>u.value===m,after:f=u=>t.after(u)}={}){r=r===!0?"Submit":r||null;const u=r?p`<button type=submit disabled>${r}`:null;r&&f(u),l(t,n),n=i(t)?o(t):void 0,e.addEventListener("submit",v),t.oninput=g;function m(){if(i(t))return n=o(t),!0}function v($){K($),r&&(m()?(u.disabled=!0,te($)):t.reportValidity())}function g($){r?(u.disabled=c(t,n),$.stopPropagation()):m()||$.stopPropagation()}return Object.defineProperty(e,"value",{get(){return n},set($){l(t,$),m()}})}function W({label:e,value:t="",type:n="text",placeholder:i,pattern:r,spellcheck:o,autocomplete:l,autocapitalize:c,min:f,max:u,minlength:m,maxlength:v,required:g=m>0,datalist:$,readonly:h,disabled:N,width:y,...b}={}){const[E,x]=ce($),d=p`<input
    type=${n}
    name=text
    list=${x}
    readonly=${h}
    disabled=${N}
    required=${g}
    min=${f}
    max=${u}
    minlength=${m}
    maxlength=${v}
    pattern=${r}
    spellcheck=${fe(o)}
    autocomplete=${U(l)}
    autocapitalize=${U(c)}
    placeholder=${i}
  >`,w=p`<form class=__ns__ style=${D(y)}>
    ${z(e,d)}<div class=__ns__-input>
      ${d}
    </div>${E}
  </form>`;return R(w,d,t,b)}function lt(e){return W({...e,type:"email"})}function ut(e){return W({...e,type:"tel"})}function st(e){return W({...e,type:"url"})}function ct(e){return W({...e,type:"password"})}function fe(e){return e==null?null:`${e}`}function U(e){return e==null?null:`${e===!1?"off":e===!0?"on":e}`}function ft({label:e,value:t,required:n,datalist:i,readonly:r,disabled:o,width:l,...c}={}){const[f,u]=ce(i),m=ne(),v=p`<input
    type=color
    name=text
    value=${t}
    id=${m}
    list=${u}
    readonly=${r}
    disabled=${o}
    required=${n}
  >`,g=p`<output
    for=${m}
  >`;g.value=v.value,v.addEventListener("input",()=>g.value=v.value);const $=p`<form class=__ns__ style=${D(l)}>
    ${z(e,v)}<div class=__ns__-input>
      <div class=__ns__-input>${v}${g}</div>
    </div>${f}
  </form>`;return R($,v,t,c,{after:h=>v.parentNode.after(h)})}const dt={type:"date",get:e=>e.valueAsDate,set:(e,t)=>e.value=Ee(t),same:(e,t)=>+e.valueAsDate==+t,format:Ee},pt={type:"datetime-local",get:e=>e.value?new Date(e.value):null,set:(e,t)=>e.value=Oe(t),same:(e,t)=>+new Date(e.value)==+t,format:Oe};function Ae({label:e,min:t,max:n,required:i,readonly:r,disabled:o,width:l,value:c,...f}={},{type:u,format:m,...v}){const g=p`<input type=${u} name=date readonly=${r} disabled=${o} required=${i} min=${m(t)} max=${m(n)}>`,$=p`<form class=__ns__ style=${D(l)}>
    ${z(e,g)}<div class=__ns__-input>
      ${g}
    </div>
  </form>`;return R($,g,de(c),f,v)}function mt(e){return Ae(e,dt)}function vt(e){return Ae(e,pt)}function de(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?Ue(e,null):e==null||isNaN(e=+e)?null:new Date(+e)}function Ee(e){return(e=de(e))?e.toISOString().slice(0,10):e}function Oe(e){return(e=de(e))?new Date(+e-e.getTimezoneOffset()*1e3*60).toISOString().slice(0,16):e}function $t(e,t){return(Array.isArray(e)?bt:_t)(e,t)}function ht(e){return p`<div>${e}`}function bt(e,{template:t=ht}={}){e=[...e];let n=e.map(({value:i})=>i);return Object.defineProperty(t(e),"value",{get(){for(let i=0,r=e.length;i<r;++i){const o=e[i].value;Object.is(o,n[i])||(n=[...n],n[i]=o)}return n},set(i=[]){for(let r=0,o=e.length;r<o;++r)e[r].value=i[r]}})}function yt(e){return p`<div>${Object.values(e)}`}function _t(e,{template:t=yt}={}){e={...e};let n=Object.fromEntries(Object.entries(e).map(([i,{value:r}])=>[i,r]));return Object.defineProperty(t(e),"value",{get(){for(const i in n){const r=e[i].value;Object.is(r,n[i])||(n={...n},n[i]=r)}return n},set(i={}){for(const r in e)e[r].value=i[r]}})}function gt(e){class t extends e{constructor(i){super(i.name),Object.defineProperty(this,"_",{value:i}),Object.defineProperty(this,"_url",{writable:!0})}async url(){return this._url||(this._url=URL.createObjectURL(this._))}async blob(){return this._}async stream(){return this._.stream()}}return function({label:n,required:i,accept:r,capture:o,multiple:l,disabled:c,width:f,value:u,submit:m,...v}={}){const g=p`<input
      type=file
      name=file
      disabled=${c}
      required=${i}
      accept=${r}
      capture=${o}
      multiple=${l}
    >`,$=p`<form class=__ns__ style=${D(f)}>
      ${z(n,g)}<div class=__ns__-input>
        ${g}
      </div>
    </form>`;return R($,g,void 0,v,{get:h=>l?Array.from(h.files,N=>new t(N)):h.files.length?new t(h.files[0]):null,set:()=>{},same:()=>!1})}}const oe=1e-6;function wt(e,t){return arguments.length<2&&(t=e,e=void 0),e===void 0&&(e=[]),Se({extent:e},t)}function xt(e=[0,1],t){return Se({extent:e,range:!0},t)}function Se({extent:[e,t],range:n},{format:i=ge,transform:r,invert:o,label:l="",value:c,step:f,disabled:u,placeholder:m,validate:v=be,width:g}={}){let $;if(typeof i!="function")throw new TypeError("format is not a function");(e==null||isNaN(e=+e))&&(e=-1/0),(t==null||isNaN(t=+t))&&(t=1/0),e>t&&([e,t]=[t,e],r===void 0&&(r=pe)),f!==void 0&&(f=+f);const h=p`<input type=number min=${isFinite(e)?e:null} max=${isFinite(t)?t:null} step=${f??"any"} name=number required placeholder=${m} oninput=${x} disabled=${u}>`;let N;if(n){if(r===void 0&&(r=P),typeof r!="function")throw new TypeError("transform is not a function");if(o===void 0&&(o=r.invert===void 0?Nt(r):r.invert),typeof o!="function")throw new TypeError("invert is not a function");let d=+r(e),w=+r(t);d>w&&([d,w]=[w,d]),n=p`<input type=range min=${isFinite(d)?d:null} max=${isFinite(w)?w:null} step=${f===void 0||r!==P&&r!==pe?"any":f} name=range oninput=${E} disabled=${u}>`,N=r===P?n:p`<input type=range min=${e} max=${t} step=${f===void 0?"any":f} name=range disabled=${u}>`}else n=null,r=o=P;const y=p`<form class=__ns__ style=${D(g)}>
    ${z(l,h)}<div class=__ns__-input>
      ${h}${n}
    </div>
  </form>`;y.addEventListener("submit",K);function b(d){return N?(d=Math.max(e,Math.min(t,d)),isFinite(d)?(N.valueAsNumber=d,N.valueAsNumber):d):+d}function E(d){const w=b(o(n.valueAsNumber));if(isFinite(w)&&(h.valueAsNumber=Math.max(e,Math.min(t,w)),v(h))){$=h.valueAsNumber,h.value=i($);return}d&&d.stopPropagation()}function x(d){const w=b(h.valueAsNumber);if(isFinite(w)&&(n&&(n.valueAsNumber=r(w)),v(h))){$=w;return}d&&d.stopPropagation()}return Object.defineProperty(y,"value",{get(){return $},set(d){d=b(d),isFinite(d)&&(h.valueAsNumber=d,n&&(n.valueAsNumber=r(d)),v(h)&&($=d,h.value=i($)))}}),c===void 0&&N&&(c=N.valueAsNumber),c!==void 0&&(y.value=c),y}function pe(e){return-e}function kt(e){return e*e}function Nt(e){return e===P||e===pe?e:e===Math.sqrt?kt:e===Math.log?Math.exp:e===Math.exp?Math.log:t=>At(e,t,t)}function At(e,t,n){let i=100,r,o,l;n=n===void 0?0:+n,t=+t;do o=e(n),l=e(n+oe),o===l&&(l=o+oe),n-=r=-1*oe*(o-t)/(o-l);while(i-- >0&&Math.abs(r)>oe);return i<0?NaN:n}function Et(e,{locale:t,format:n=zt(t),label:i,query:r="",placeholder:o="Search",columns:l=_e(e),spellcheck:c,autocomplete:f,autocapitalize:u,filter:m=l===void 0?je:Ot(l),datalist:v,disabled:g,required:$=!0,width:h}={}){let N=[];e=H(e),$=!!$;const[y,b]=ce(v),E=p`<input
    name=input
    type=search
    list=${b}
    disabled=${g}
    spellcheck=${fe(c)}
    autocomplete=${U(f)}
    autocapitalize=${U(u)}
    placeholder=${o}
    value=${r}
    oninput=${w}
  >`,x=p`<output name=output>`,d=p`<form class=__ns__ style=${D(h)}>
    ${z(i,E)}<div class=__ns__-input>
      ${E}${x}
    </div>${y}
  </form>`;d.addEventListener("submit",K);function w(){N=E.value||$?e.filter(m(E.value)):[],l!==void 0&&(N.columns=l),x.value=n(N.length)}return w(),Object.defineProperties(d,{value:{get(){return N}},query:{get(){return r},set(k){r=E.value=G(k),w()}}})}function je(e){const t=`${e}`.split(/\s+/g).filter(n=>n).map(ze);return n=>{if(n==null)return!1;if(typeof n=="object")e:for(const i of t){for(const r of St(n))if(i.test(r))continue e;return!1}else for(const i of t)if(!i.test(n))return!1;return!0}}function Ot(e){return t=>{const n=`${t}`.split(/\s+/g).filter(i=>i).map(ze);return i=>{e:for(const r of n){for(const o of e)if(r.test(i[o]))continue e;return!1}return!0}}}function*St(e){for(const t in e)yield e[t]}function ze(e){return new RegExp(`(?:^|[^\\p{L}-])${jt(e)}`,"iu")}function jt(e){return e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")}const zt=ie(e=>{const t=V(e);return n=>`${t(n)} result${n===1?"":"s"}`}),Lt=ke({render(e,t,n,i,{format:r,multiple:o,size:l,label:c,width:f}){const u=p`<select class=__ns__-input disabled=${i===!0} multiple=${o} size=${l} name=input>
      ${t.map(m=>p`<option value=${m} disabled=${typeof i=="function"?i(m):!1} selected=${n(m)}>${G(r(e[m],m,e))}`)}
    </select>`;return[p`<form class=__ns__ style=${D(f)}>${z(c,u)}${u}`,u]},selectedIndexes(e){return Array.from(e.selectedOptions,t=>+t.value)},select(e,t){e.selected=t}}),Le=22;function qt(e,t={}){const{rows:n=11.5,height:i,maxHeight:r=i===void 0?(n+1)*Le-1:void 0,width:o={},maxWidth:l}=t,c=ne(),f=p`<form class="__ns__ __ns__-table" id=${c} style=${{height:C(i),maxHeight:C(r),width:typeof o=="string"||typeof o=="number"?C(o):void 0,maxWidth:C(l)}}>`;return e&&typeof e.then=="function"?(Object.defineProperty(f,"value",{configurable:!0,set(){throw new Error("cannot set value while data is unresolved")}}),Promise.resolve(e).then(u=>qe({root:f,id:c},u,t))):qe({root:f,id:c},e,t),f}function qe({root:e,id:t},n,{columns:i=_e(n),value:r,required:o=!0,sort:l,reverse:c=!1,format:f,locale:u,align:m,header:v,rows:g=11.5,width:$={},multiple:h=!0,layout:N}={}){i=i===void 0?Dt(n):H(i),N===void 0&&(N=i.length>=12?"auto":"fixed"),f=Tt(f,n,i,u),m=Pt(m,n,i);let y=[],b=[],E=n[Symbol.iterator](),x=0,d=Mt(n),w=O(g*2);function k(){x>=0&&(x=E=void 0,b=Uint32Array.from(y=H(n),(a,s)=>s),d=b.length)}function O(a){if(a=Math.floor(a),d!==void 0)return Math.min(d,a);if(a<=x)return a;for(;a>x;){const{done:s,value:_}=E.next();if(s)return d=x;b.push(x++),y.push(_)}return x}let j=null,q=!1,A=new Set,M=null,F=null;const L=p`<tbody>`,Fe=p`<tr><td><input type=${h?"checkbox":"radio"} name=${h?null:"radio"}></td>${i.map(()=>p`<td>`)}`,Y=p`<tr><th><input type=checkbox onclick=${Ie} disabled=${!h}></th>${i.map(a=>p`<th title=${a} onclick=${s=>he(s,a)}><span></span>${v&&a in v?v[a]:a}</th>`)}</tr>`;e.appendChild(p.fragment`<table style=${{tableLayout:N}}>
  <thead>${O(1)||i.length?Y:null}</thead>
  ${L}
</table>
<style>${i.map((a,s)=>{const _=[];if(m[a]!=null&&_.push(`text-align:${m[a]}`),$[a]!=null&&_.push(`width:${C($[a])}`),_.length)return`#${t} tr>:nth-child(${s+2}){${_.join(";")}}`}).filter(P).join(`
`)}</style>`);function ae(a,s){if(x===a){for(;a<s;++a)ve(E.next().value,a);x=s}else for(let _;a<s;++a)_=b[a],ve(y[_],_)}function ve(a,s){const _=Fe.cloneNode(!0),S=X(_);if(S.onclick=He,S.checked=A.has(s),S.value=s,a!=null)for(let I=0;I<i.length;++I){let ee=i[I],T=a[ee];B(T)&&(T=f[ee](T,s,n),T instanceof Node||(T=document.createTextNode(T)),_.childNodes[I+1].appendChild(T))}L.append(_)}function J(a){k();let s=b.indexOf(a);if(s<L.childNodes.length){const _=L.childNodes[s];X(_).checked=!1}A.delete(a)}function Z(a){k();let s=b.indexOf(a);if(s<L.childNodes.length){const _=L.childNodes[s];X(_).checked=!0}A.add(a)}function*$e(a,s){if(k(),a=b.indexOf(a),s=b.indexOf(s),a<s)for(;a<=s;)yield b[a++];else for(;s<=a;)yield b[s++]}function Ce(a){return a[Symbol.iterator]().next().value}function Ie(a){if(k(),this.checked){A=new Set(b);for(const s of L.childNodes)X(s).checked=!0}else{for(let s of A)J(s);M=F=null,a.detail&&a.currentTarget.blur()}Q()}function He(a){k();let s=+this.value;if(h)if(a.shiftKey){if(M===null)M=A.size?Ce(A):b[0];else for(let _ of $e(M,F))J(_);F=s;for(let _ of $e(M,F))Z(_)}else M=F=s,A.has(s)?(J(s),M=F=null,a.detail&&a.currentTarget.blur()):Z(s);else{for(let _ of A)J(_);Z(s)}Q()}function he(a,s){k();const _=a.currentTarget;let S;if(j===_&&a.metaKey)me(j).textContent="",j=null,q=!1,S=se;else{j===_?q=!q:(j&&(me(j).textContent=""),j=_,q=a.altKey);const I=q?we:se;S=(ee,T)=>I(y[ee][s],y[T][s]),me(_).textContent=q?"\u25BE":"\u25B4"}for(b.sort(S),A=new Set(Array.from(A).sort(S)),e.scrollTo(e.scrollLeft,0);L.firstChild;)L.firstChild.remove();ae(0,w=O(g*2)),M=F=null,Q()}function Q(){const a=X(Y);a.disabled=!h&&!A.size,a.indeterminate=h&&A.size&&A.size!==d,a.checked=A.size,r=void 0}if(e.addEventListener("scroll",()=>{e.scrollHeight-e.scrollTop<g*Le*1.5&&w<O(w+1)&&ae(w,w=O(w+g))}),l===void 0&&c&&(k(),b.reverse()),r!==void 0){if(k(),h){const a=new Set(r);A=new Set(b.filter(s=>a.has(y[s])))}else{const a=y.indexOf(r);A=a<0?new Set:new Set([a])}Q()}if(O(1)?ae(0,w):L.append(p`<tr>${i.length?p`<td>`:null}<td rowspan=${i.length} style="padding-left: var(--length3); font-style: italic;">No results.</td></tr>`),l!==void 0){let a=i.indexOf(l);a>=0&&(c&&(j=Y.childNodes[a+1]),he({currentTarget:Y.childNodes[a+1]},i[a]))}return Object.defineProperty(e,"value",{get(){if(r===void 0)if(k(),h)r=Array.from(o&&A.size===0?b:A,a=>y[a]),r.columns=i;else if(A.size){const[a]=A;r=y[a]}else r=null;return r},set(a){if(k(),h){const s=new Set(a),_=new Set(b.filter(S=>s.has(y[S])));for(const S of A)_.has(S)||J(S);for(const S of _)A.has(S)||Z(S)}else{const s=y.indexOf(a);A=s<0?new Set:new Set([s])}r=void 0}})}function X(e){return e.firstChild.firstChild}function me(e){return e.firstChild}function Tt(e={},t,n,i){const r=Object.create(null);for(const o of n){if(o in e){r[o]=e[o];continue}switch(Te(t,o)){case"number":r[o]=V(i);break;case"date":r[o]=ue;break;default:r[o]=re(i);break}}return r}function Pt(e={},t,n){const i=Object.create(null);for(const r of n)r in e?i[r]=e[r]:Te(t,r)==="number"&&(i[r]="right");return i}function Te(e,t){for(const n of e){if(n==null)continue;const i=n[t];if(i!=null)return typeof i=="number"?"number":i instanceof Date?"date":void 0}}function Mt(e){if(typeof e.length=="number")return e.length;if(typeof e.size=="number")return e.size;if(typeof e.numRows=="function")return e.numRows()}function Dt(e){const t=new Set;for(const n of e)for(const i in n)t.add(i);return Array.from(t)}function Ft({value:e="",label:t,placeholder:n,spellcheck:i,autocomplete:r,autocapitalize:o,rows:l=3,minlength:c,maxlength:f,required:u=c>0,readonly:m,disabled:v,monospace:g=!1,resize:$=l<12,width:h,...N}={}){const y=p`<textarea
    name=text
    readonly=${m}
    disabled=${v}
    required=${u}
    rows=${l}
    minlength=${c}
    maxlength=${f}
    spellcheck=${fe(i)}
    autocomplete=${U(r)}
    autocapitalize=${U(o)}
    placeholder=${n}
    onkeydown=${E}
    style=${{width:h,fontFamily:g?"var(--monospace, monospace)":null,resize:$?null:"none"}}
  >`,b=p`<form class="__ns__ __ns__-textarea" style=${D(h)}>
    ${z(t,y)}<div>
      ${y}
    </div>
  </form>`;function E(x){if(N.submit&&x.key==="Enter"&&(x.metaKey||x.ctrlKey))return b.dispatchEvent(new Event("submit",le))}return R(b,y,e,N)}function Ct(e){const t=new EventTarget;return t.value=e,t}function Pe(e){return new Promise(t=>{requestAnimationFrame(()=>{const n=e.closest(".observablehq");if(!n)return t();const i=new MutationObserver(()=>{n.contains(e)||(i.disconnect(),t())});i.observe(n,{childList:!0})})})}function It(e,t,n=Pe(e)){const i=De(t),r=()=>Me(e,t),o=()=>(Me(t,e),t.dispatchEvent(new Event(i,le)));return r(),e.addEventListener(De(e),o),t.addEventListener(i,r),n.then(()=>t.removeEventListener(i,r)),e}function Ht(e){switch(e.type){case"range":case"number":return e.valueAsNumber;case"date":return e.valueAsDate;case"checkbox":return e.checked;case"file":return e.multiple?e.files:e.files[0];default:return e.value}}function Me(e,t){const n=Ht(t);switch(e.type){case"range":case"number":e.valueAsNumber=n;break;case"date":e.valueAsDate=n;break;case"checkbox":e.checked=n;break;case"file":e.multiple?e.files=n:e.files=[n];break;default:e.value=n;break}}function De(e){switch(e.type){case"button":case"submit":return"click";case"file":return"change";default:return"input"}}export{It as bind,Ke as button,tt as checkbox,ft as color,mt as date,vt as datetime,Pe as disposal,lt as email,gt as fileOf,$t as form,Ve as formatAuto,ue as formatDate,re as formatLocaleAuto,V as formatLocaleNumber,Be as formatNumber,ge as formatTrim,Ct as input,wt as number,ct as password,et as radio,xt as range,Et as search,je as searchFilter,Lt as select,qt as table,ut as tel,W as text,Ft as textarea,nt as toggle,st as url};
