import{range as bn,bisect as S,tickStep as Sn,ticks as O,tickIncrement as An,ascending as J,quantileSorted as qn,quantile as Dn}from"../d3-array@2.12.1/index.js";import{interpolateNumber as In,interpolate as T,interpolateRound as E,piecewise as Rn}from"../d3-interpolate@2.0.1/index.js";import{formatSpecifier as Fn,precisionFixed as On,precisionRound as Tn,precisionPrefix as En,formatPrefix as Pn,format as K}from"../d3-format@1.4.5/index.js";import{timeSecond as Ln,timeMinute as Bn,timeHour as Yn,timeDay as Cn,timeWeek as Qn,timeMonth as Un,timeYear as zn,timeTickInterval as Hn,timeTicks as Wn,utcSecond as jn,utcMinute as Gn,utcHour as Jn,utcDay as Kn,utcWeek as Vn,utcMonth as Xn,utcYear as Zn,utcTickInterval as _n,utcTicks as nt}from"../d3-time@2.1.1/index.js";import{timeFormat as tt,utcFormat as rt}from"../d3-time-format@3.0.0/index.js";function k(n,t){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(t).domain(n);break}return this}function N(n,t){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break}default:{this.domain(n),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const P=Symbol("implicit");function L(){var n=new Map,t=[],a=[],r=P;function u(e){var i=e+"",o=n.get(i);if(!o){if(r!==P)return r;n.set(i,o=t.push(e))}return a[(o-1)%a.length]}return u.domain=function(e){if(!arguments.length)return t.slice();t=[],n=new Map;for(const i of e){const o=i+"";n.has(o)||n.set(o,t.push(i))}return u},u.range=function(e){return arguments.length?(a=Array.from(e),u):a.slice()},u.unknown=function(e){return arguments.length?(r=e,u):r},u.copy=function(){return L(t,a).unknown(r)},k.apply(u,arguments),u}function B(){var n=L().unknown(void 0),t=n.domain,a=n.range,r=0,u=1,e,i,o=!1,l=0,c=0,g=.5;delete n.unknown;function s(){var f=t().length,p=u<r,d=p?u:r,m=p?r:u;e=(m-d)/Math.max(1,f-l+c*2),o&&(e=Math.floor(e)),d+=(m-d-e*(f-l))*g,i=e*(1-l),o&&(d=Math.round(d),i=Math.round(i));var y=bn(f).map(function(w){return d+e*w});return a(p?y.reverse():y)}return n.domain=function(f){return arguments.length?(t(f),s()):t()},n.range=function(f){return arguments.length?([r,u]=f,r=+r,u=+u,s()):[r,u]},n.rangeRound=function(f){return[r,u]=f,r=+r,u=+u,o=!0,s()},n.bandwidth=function(){return i},n.step=function(){return e},n.round=function(f){return arguments.length?(o=!!f,s()):o},n.padding=function(f){return arguments.length?(l=Math.min(1,c=+f),s()):l},n.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),s()):l},n.paddingOuter=function(f){return arguments.length?(c=+f,s()):c},n.align=function(f){return arguments.length?(g=Math.max(0,Math.min(1,f)),s()):g},n.copy=function(){return B(t(),[r,u]).round(o).paddingInner(l).paddingOuter(c).align(g)},k.apply(s(),arguments)}function V(n){var t=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return V(t())},n}function et(){return V(B.apply(null,arguments).paddingInner(1))}function ut(n){return function(){return n}}function D(n){return+n}var X=[0,1];function v(n){return n}function Y(n,t){return(t-=n=+n)?function(a){return(a-n)/t}:ut(isNaN(t)?NaN:.5)}function at(n,t){var a;return n>t&&(a=n,n=t,t=a),function(r){return Math.max(n,Math.min(t,r))}}function it(n,t,a){var r=n[0],u=n[1],e=t[0],i=t[1];return u<r?(r=Y(u,r),e=a(i,e)):(r=Y(r,u),e=a(e,i)),function(o){return e(r(o))}}function ot(n,t,a){var r=Math.min(n.length,t.length)-1,u=new Array(r),e=new Array(r),i=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++i<r;)u[i]=Y(n[i],n[i+1]),e[i]=a(t[i],t[i+1]);return function(o){var l=S(n,o,1,r)-1;return e[l](u[l](o))}}function A(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function I(){var n=X,t=X,a=T,r,u,e,i=v,o,l,c;function g(){var f=Math.min(n.length,t.length);return i!==v&&(i=at(n[0],n[f-1])),o=f>2?ot:it,l=c=null,s}function s(f){return f==null||isNaN(f=+f)?e:(l||(l=o(n.map(r),t,a)))(r(i(f)))}return s.invert=function(f){return i(u((c||(c=o(t,n.map(r),In)))(f)))},s.domain=function(f){return arguments.length?(n=Array.from(f,D),g()):n.slice()},s.range=function(f){return arguments.length?(t=Array.from(f),g()):t.slice()},s.rangeRound=function(f){return t=Array.from(f),a=E,g()},s.clamp=function(f){return arguments.length?(i=f?!0:v,g()):i!==v},s.interpolate=function(f){return arguments.length?(a=f,g()):a},s.unknown=function(f){return arguments.length?(e=f,s):e},function(f,p){return r=f,u=p,g()}}function C(){return I()(v,v)}function Z(n,t,a,r){var u=Sn(n,t,a),e;switch(r=Fn(r??",f"),r.type){case"s":{var i=Math.max(Math.abs(n),Math.abs(t));return r.precision==null&&!isNaN(e=En(u,i))&&(r.precision=e),Pn(r,i)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(e=Tn(u,Math.max(Math.abs(n),Math.abs(t))))&&(r.precision=e-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(e=On(u))&&(r.precision=e-(r.type==="%")*2);break}}return K(r)}function $(n){var t=n.domain;return n.ticks=function(a){var r=t();return O(r[0],r[r.length-1],a??10)},n.tickFormat=function(a,r){var u=t();return Z(u[0],u[u.length-1],a??10,r)},n.nice=function(a){a==null&&(a=10);var r=t(),u=0,e=r.length-1,i=r[u],o=r[e],l,c,g=10;for(o<i&&(c=i,i=o,o=c,c=u,u=e,e=c);g-- >0;){if(c=An(i,o,a),c===l)return r[u]=i,r[e]=o,t(r);if(c>0)i=Math.floor(i/c)*c,o=Math.ceil(o/c)*c;else if(c<0)i=Math.ceil(i*c)/c,o=Math.floor(o*c)/c;else break;l=c}return n},n}function _(){var n=C();return n.copy=function(){return A(n,_())},k.apply(n,arguments),$(n)}function nn(n){var t;function a(r){return r==null||isNaN(r=+r)?t:r}return a.invert=a,a.domain=a.range=function(r){return arguments.length?(n=Array.from(r,D),a):n.slice()},a.unknown=function(r){return arguments.length?(t=r,a):t},a.copy=function(){return nn(n).unknown(t)},n=arguments.length?Array.from(n,D):[0,1],$(a)}function tn(n,t){n=n.slice();var a=0,r=n.length-1,u=n[a],e=n[r],i;return e<u&&(i=a,a=r,r=i,i=u,u=e,e=i),n[a]=t.floor(u),n[r]=t.ceil(e),n}function rn(n){return Math.log(n)}function en(n){return Math.exp(n)}function ct(n){return-Math.log(-n)}function ft(n){return-Math.exp(-n)}function lt(n){return isFinite(n)?+("1e"+n):n<0?0:n}function st(n){return n===10?lt:n===Math.E?Math.exp:function(t){return Math.pow(n,t)}}function gt(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),function(t){return Math.log(t)/n})}function un(n){return function(t){return-n(-t)}}function Q(n){var t=n(rn,en),a=t.domain,r=10,u,e;function i(){return u=gt(r),e=st(r),a()[0]<0?(u=un(u),e=un(e),n(ct,ft)):n(rn,en),t}return t.base=function(o){return arguments.length?(r=+o,i()):r},t.domain=function(o){return arguments.length?(a(o),i()):a()},t.ticks=function(o){var l=a(),c=l[0],g=l[l.length-1],s;(s=g<c)&&(f=c,c=g,g=f);var f=u(c),p=u(g),d,m,y,w=o==null?10:+o,M=[];if(!(r%1)&&p-f<w){if(f=Math.floor(f),p=Math.ceil(p),c>0){for(;f<=p;++f)for(m=1,d=e(f);m<r;++m)if(y=d*m,!(y<c)){if(y>g)break;M.push(y)}}else for(;f<=p;++f)for(m=r-1,d=e(f);m>=1;--m)if(y=d*m,!(y<c)){if(y>g)break;M.push(y)}M.length*2<w&&(M=O(c,g,w))}else M=O(f,p,Math.min(p-f,w)).map(e);return s?M.reverse():M},t.tickFormat=function(o,l){if(l==null&&(l=r===10?".0e":","),typeof l!="function"&&(l=K(l)),o===1/0)return l;o==null&&(o=10);var c=Math.max(1,r*o/t.ticks().length);return function(g){var s=g/e(Math.round(u(g)));return s*r<r-.5&&(s*=r),s<=c?l(g):""}},t.nice=function(){return a(tn(a(),{floor:function(o){return e(Math.floor(u(o)))},ceil:function(o){return e(Math.ceil(u(o)))}}))},t}function an(){var n=Q(I()).domain([1,10]);return n.copy=function(){return A(n,an()).base(n.base())},k.apply(n,arguments),n}function on(n){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/n))}}function cn(n){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*n}}function U(n){var t=1,a=n(on(t),cn(t));return a.constant=function(r){return arguments.length?n(on(t=+r),cn(t)):t},$(a)}function fn(){var n=U(I());return n.copy=function(){return A(n,fn()).constant(n.constant())},k.apply(n,arguments)}function ln(n){return function(t){return t<0?-Math.pow(-t,n):Math.pow(t,n)}}function mt(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function pt(n){return n<0?-n*n:n*n}function z(n){var t=n(v,v),a=1;function r(){return a===1?n(v,v):a===.5?n(mt,pt):n(ln(a),ln(1/a))}return t.exponent=function(u){return arguments.length?(a=+u,r()):a},$(t)}function H(){var n=z(I());return n.copy=function(){return A(n,H()).exponent(n.exponent())},k.apply(n,arguments),n}function ht(){return H.apply(null,arguments).exponent(.5)}function sn(n){return Math.sign(n)*n*n}function dt(n){return Math.sign(n)*Math.sqrt(Math.abs(n))}function gn(){var n=C(),t=[0,1],a=!1,r;function u(e){var i=dt(n(e));return isNaN(i)?r:a?Math.round(i):i}return u.invert=function(e){return n.invert(sn(e))},u.domain=function(e){return arguments.length?(n.domain(e),u):n.domain()},u.range=function(e){return arguments.length?(n.range((t=Array.from(e,D)).map(sn)),u):t.slice()},u.rangeRound=function(e){return u.range(e).round(!0)},u.round=function(e){return arguments.length?(a=!!e,u):a},u.clamp=function(e){return arguments.length?(n.clamp(e),u):n.clamp()},u.unknown=function(e){return arguments.length?(r=e,u):r},u.copy=function(){return gn(n.domain(),t).round(a).clamp(n.clamp()).unknown(r)},k.apply(u,arguments),$(u)}function mn(){var n=[],t=[],a=[],r;function u(){var i=0,o=Math.max(1,t.length);for(a=new Array(o-1);++i<o;)a[i-1]=qn(n,i/o);return e}function e(i){return i==null||isNaN(i=+i)?r:t[S(a,i)]}return e.invertExtent=function(i){var o=t.indexOf(i);return o<0?[NaN,NaN]:[o>0?a[o-1]:n[0],o<a.length?a[o]:n[n.length-1]]},e.domain=function(i){if(!arguments.length)return n.slice();n=[];for(let o of i)o!=null&&!isNaN(o=+o)&&n.push(o);return n.sort(J),u()},e.range=function(i){return arguments.length?(t=Array.from(i),u()):t.slice()},e.unknown=function(i){return arguments.length?(r=i,e):r},e.quantiles=function(){return a.slice()},e.copy=function(){return mn().domain(n).range(t).unknown(r)},k.apply(e,arguments)}function pn(){var n=0,t=1,a=1,r=[.5],u=[0,1],e;function i(l){return l!=null&&l<=l?u[S(r,l,0,a)]:e}function o(){var l=-1;for(r=new Array(a);++l<a;)r[l]=((l+1)*t-(l-a)*n)/(a+1);return i}return i.domain=function(l){return arguments.length?([n,t]=l,n=+n,t=+t,o()):[n,t]},i.range=function(l){return arguments.length?(a=(u=Array.from(l)).length-1,o()):u.slice()},i.invertExtent=function(l){var c=u.indexOf(l);return c<0?[NaN,NaN]:c<1?[n,r[0]]:c>=a?[r[a-1],t]:[r[c-1],r[c]]},i.unknown=function(l){return arguments.length&&(e=l),i},i.thresholds=function(){return r.slice()},i.copy=function(){return pn().domain([n,t]).range(u).unknown(e)},k.apply($(i),arguments)}function hn(){var n=[.5],t=[0,1],a,r=1;function u(e){return e!=null&&e<=e?t[S(n,e,0,r)]:a}return u.domain=function(e){return arguments.length?(n=Array.from(e),r=Math.min(n.length,t.length-1),u):n.slice()},u.range=function(e){return arguments.length?(t=Array.from(e),r=Math.min(n.length,t.length-1),u):t.slice()},u.invertExtent=function(e){var i=t.indexOf(e);return[n[i-1],n[i]]},u.unknown=function(e){return arguments.length?(a=e,u):a},u.copy=function(){return hn().domain(n).range(t).unknown(a)},k.apply(u,arguments)}function yt(n){return new Date(n)}function vt(n){return n instanceof Date?+n:+new Date(+n)}function W(n,t,a,r,u,e,i,o,l,c){var g=C(),s=g.invert,f=g.domain,p=c(".%L"),d=c(":%S"),m=c("%I:%M"),y=c("%I %p"),w=c("%a %d"),M=c("%b %d"),q=c("%B"),Nn=c("%Y");function $n(h){return(l(h)<h?p:o(h)<h?d:i(h)<h?m:e(h)<h?y:r(h)<h?u(h)<h?w:M:a(h)<h?q:Nn)(h)}return g.invert=function(h){return new Date(s(h))},g.domain=function(h){return arguments.length?f(Array.from(h,vt)):f().map(yt)},g.ticks=function(h){var x=f();return n(x[0],x[x.length-1],h??10)},g.tickFormat=function(h,x){return x==null?$n:c(x)},g.nice=function(h){var x=f();return(!h||typeof h.range!="function")&&(h=t(x[0],x[x.length-1],h??10)),h?f(tn(x,h)):g},g.copy=function(){return A(g,W(n,t,a,r,u,e,i,o,l,c))},g}function Mt(){return k.apply(W(Wn,Hn,zn,Un,Qn,Cn,Yn,Bn,Ln,tt).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function kt(){return k.apply(W(nt,_n,Zn,Xn,Vn,Kn,Jn,Gn,jn,rt).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function R(){var n=0,t=1,a,r,u,e,i=v,o=!1,l;function c(s){return s==null||isNaN(s=+s)?l:i(u===0?.5:(s=(e(s)-a)*u,o?Math.max(0,Math.min(1,s)):s))}c.domain=function(s){return arguments.length?([n,t]=s,a=e(n=+n),r=e(t=+t),u=a===r?0:1/(r-a),c):[n,t]},c.clamp=function(s){return arguments.length?(o=!!s,c):o},c.interpolator=function(s){return arguments.length?(i=s,c):i};function g(s){return function(f){var p,d;return arguments.length?([p,d]=f,i=s(p,d),c):[i(0),i(1)]}}return c.range=g(T),c.rangeRound=g(E),c.unknown=function(s){return arguments.length?(l=s,c):l},function(s){return e=s,a=s(n),r=s(t),u=a===r?0:1/(r-a),c}}function b(n,t){return t.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function dn(){var n=$(R()(v));return n.copy=function(){return b(n,dn())},N.apply(n,arguments)}function yn(){var n=Q(R()).domain([1,10]);return n.copy=function(){return b(n,yn()).base(n.base())},N.apply(n,arguments)}function vn(){var n=U(R());return n.copy=function(){return b(n,vn()).constant(n.constant())},N.apply(n,arguments)}function j(){var n=z(R());return n.copy=function(){return b(n,j()).exponent(n.exponent())},N.apply(n,arguments)}function wt(){return j.apply(null,arguments).exponent(.5)}function Mn(){var n=[],t=v;function a(r){if(r!=null&&!isNaN(r=+r))return t((S(n,r,1)-1)/(n.length-1))}return a.domain=function(r){if(!arguments.length)return n.slice();n=[];for(let u of r)u!=null&&!isNaN(u=+u)&&n.push(u);return n.sort(J),a},a.interpolator=function(r){return arguments.length?(t=r,a):t},a.range=function(){return n.map((r,u)=>t(u/(n.length-1)))},a.quantiles=function(r){return Array.from({length:r+1},(u,e)=>Dn(n,e/r))},a.copy=function(){return Mn(t).domain(n)},N.apply(a,arguments)}function F(){var n=0,t=.5,a=1,r=1,u,e,i,o,l,c=v,g,s=!1,f;function p(m){return isNaN(m=+m)?f:(m=.5+((m=+g(m))-e)*(r*m<r*e?o:l),c(s?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([n,t,a]=m,u=g(n=+n),e=g(t=+t),i=g(a=+a),o=u===e?0:.5/(e-u),l=e===i?0:.5/(i-e),r=e<u?-1:1,p):[n,t,a]},p.clamp=function(m){return arguments.length?(s=!!m,p):s},p.interpolator=function(m){return arguments.length?(c=m,p):c};function d(m){return function(y){var w,M,q;return arguments.length?([w,M,q]=y,c=Rn(m,[w,M,q]),p):[c(0),c(.5),c(1)]}}return p.range=d(T),p.rangeRound=d(E),p.unknown=function(m){return arguments.length?(f=m,p):f},function(m){return g=m,u=m(n),e=m(t),i=m(a),o=u===e?0:.5/(e-u),l=e===i?0:.5/(i-e),r=e<u?-1:1,p}}function kn(){var n=$(F()(v));return n.copy=function(){return b(n,kn())},N.apply(n,arguments)}function wn(){var n=Q(F()).domain([.1,1,10]);return n.copy=function(){return b(n,wn()).base(n.base())},N.apply(n,arguments)}function xn(){var n=U(F());return n.copy=function(){return b(n,xn()).constant(n.constant())},N.apply(n,arguments)}function G(){var n=z(F());return n.copy=function(){return b(n,G()).exponent(n.exponent())},N.apply(n,arguments)}function xt(){return G.apply(null,arguments).exponent(.5)}export{B as scaleBand,kn as scaleDiverging,wn as scaleDivergingLog,G as scaleDivergingPow,xt as scaleDivergingSqrt,xn as scaleDivergingSymlog,nn as scaleIdentity,P as scaleImplicit,_ as scaleLinear,an as scaleLog,L as scaleOrdinal,et as scalePoint,H as scalePow,mn as scaleQuantile,pn as scaleQuantize,gn as scaleRadial,dn as scaleSequential,yn as scaleSequentialLog,j as scaleSequentialPow,Mn as scaleSequentialQuantile,wt as scaleSequentialSqrt,vn as scaleSequentialSymlog,ht as scaleSqrt,fn as scaleSymlog,hn as scaleThreshold,Mt as scaleTime,kt as scaleUtc,Z as tickFormat};
