function X(o,e,s){if(o&&o.length){const[t,n]=e,r=Math.PI/180*s,i=Math.cos(r),h=Math.sin(r);for(const a of o){const[l,c]=a;a[0]=(l-t)*i-(c-n)*h+t,a[1]=(l-t)*h+(c-n)*i+n}}}function Ot(o,e){return o[0]===e[0]&&o[1]===e[1]}function Lt(o,e,s,t=1){const n=s,r=Math.max(e,.1),i=o[0]&&o[0][0]&&typeof o[0][0]=="number"?[o]:o,h=[0,0];if(n)for(const l of i)X(l,h,n);const a=function(l,c,d){const p=[];for(const M of l){const m=[...M];Ot(m[0],m[m.length-1])||m.push([m[0][0],m[0][1]]),m.length>2&&p.push(m)}const u=[];c=Math.max(c,.1);const f=[];for(const M of p)for(let m=0;m<M.length-1;m++){const P=M[m],x=M[m+1];if(P[1]!==x[1]){const w=Math.min(P[1],x[1]);f.push({ymin:w,ymax:Math.max(P[1],x[1]),x:w===P[1]?P[0]:x[0],islope:(x[0]-P[0])/(x[1]-P[1])})}}if(f.sort((M,m)=>M.ymin<m.ymin?-1:M.ymin>m.ymin?1:M.x<m.x?-1:M.x>m.x?1:M.ymax===m.ymax?0:(M.ymax-m.ymax)/Math.abs(M.ymax-m.ymax)),!f.length)return u;let g=[],k=f[0].ymin,b=0;for(;g.length||f.length;){if(f.length){let M=-1;for(let m=0;m<f.length&&!(f[m].ymin>k);m++)M=m;f.splice(0,M+1).forEach(m=>{g.push({s:k,edge:m})})}if(g=g.filter(M=>!(M.edge.ymax<=k)),g.sort((M,m)=>M.edge.x===m.edge.x?0:(M.edge.x-m.edge.x)/Math.abs(M.edge.x-m.edge.x)),(d!==1||b%c==0)&&g.length>1)for(let M=0;M<g.length;M+=2){const m=M+1;if(m>=g.length)break;const P=g[M].edge,x=g[m].edge;u.push([[Math.round(P.x),k],[Math.round(x.x),k]])}k+=d,g.forEach(M=>{M.edge.x=M.edge.x+d*M.edge.islope}),b++}return u}(i,r,t);if(n){for(const l of i)X(l,h,-n);(function(l,c,d){const p=[];l.forEach(u=>p.push(...u)),X(p,c,d)})(a,h,-n)}return a}function $(o,e){var s;const t=e.hachureAngle+90;let n=e.hachureGap;n<0&&(n=4*e.strokeWidth),n=Math.round(Math.max(n,.1));let r=1;return e.roughness>=1&&(((s=e.randomizer)===null||s===void 0?void 0:s.next())||Math.random())>.7&&(r=n),Lt(o,n,t,r||1)}class Y{constructor(e){this.helper=e}fillPolygons(e,s){return this._fillPolygons(e,s)}_fillPolygons(e,s){const t=$(e,s);return{type:"fillSketch",ops:this.renderLines(t,s)}}renderLines(e,s){const t=[];for(const n of e)t.push(...this.helper.doubleLineOps(n[0][0],n[0][1],n[1][0],n[1][1],s));return t}}function F(o){const e=o[0],s=o[1];return Math.sqrt(Math.pow(e[0]-s[0],2)+Math.pow(e[1]-s[1],2))}class Tt extends Y{fillPolygons(e,s){let t=s.hachureGap;t<0&&(t=4*s.strokeWidth),t=Math.max(t,.1);const n=$(e,Object.assign({},s,{hachureGap:t})),r=Math.PI/180*s.hachureAngle,i=[],h=.5*t*Math.cos(r),a=.5*t*Math.sin(r);for(const[l,c]of n)F([l,c])&&i.push([[l[0]-h,l[1]+a],[...c]],[[l[0]+h,l[1]-a],[...c]]);return{type:"fillSketch",ops:this.renderLines(i,s)}}}class Dt extends Y{fillPolygons(e,s){const t=this._fillPolygons(e,s),n=Object.assign({},s,{hachureAngle:s.hachureAngle+90}),r=this._fillPolygons(e,n);return t.ops=t.ops.concat(r.ops),t}}class _t{constructor(e){this.helper=e}fillPolygons(e,s){const t=$(e,s=Object.assign({},s,{hachureAngle:0}));return this.dotsOnLines(t,s)}dotsOnLines(e,s){const t=[];let n=s.hachureGap;n<0&&(n=4*s.strokeWidth),n=Math.max(n,.1);let r=s.fillWeight;r<0&&(r=s.strokeWidth/2);const i=n/4;for(const h of e){const a=F(h),l=a/n,c=Math.ceil(l)-1,d=a-c*n,p=(h[0][0]+h[1][0])/2-n/4,u=Math.min(h[0][1],h[1][1]);for(let f=0;f<c;f++){const g=u+d+f*n,k=p-i+2*Math.random()*i,b=g-i+2*Math.random()*i,M=this.helper.ellipse(k,b,r,r,s);t.push(...M.ops)}}return{type:"fillSketch",ops:t}}}class At{constructor(e){this.helper=e}fillPolygons(e,s){const t=$(e,s);return{type:"fillSketch",ops:this.dashedLine(t,s)}}dashedLine(e,s){const t=s.dashOffset<0?s.hachureGap<0?4*s.strokeWidth:s.hachureGap:s.dashOffset,n=s.dashGap<0?s.hachureGap<0?4*s.strokeWidth:s.hachureGap:s.dashGap,r=[];return e.forEach(i=>{const h=F(i),a=Math.floor(h/(t+n)),l=(h+n-a*(t+n))/2;let c=i[0],d=i[1];c[0]>d[0]&&(c=i[1],d=i[0]);const p=Math.atan((d[1]-c[1])/(d[0]-c[0]));for(let u=0;u<a;u++){const f=u*(t+n),g=f+t,k=[c[0]+f*Math.cos(p)+l*Math.cos(p),c[1]+f*Math.sin(p)+l*Math.sin(p)],b=[c[0]+g*Math.cos(p)+l*Math.cos(p),c[1]+g*Math.sin(p)+l*Math.sin(p)];r.push(...this.helper.doubleLineOps(k[0],k[1],b[0],b[1],s))}}),r}}class It{constructor(e){this.helper=e}fillPolygons(e,s){const t=s.hachureGap<0?4*s.strokeWidth:s.hachureGap,n=s.zigzagOffset<0?t:s.zigzagOffset,r=$(e,s=Object.assign({},s,{hachureGap:t+n}));return{type:"fillSketch",ops:this.zigzagLines(r,n,s)}}zigzagLines(e,s,t){const n=[];return e.forEach(r=>{const i=F(r),h=Math.round(i/(2*s));let a=r[0],l=r[1];a[0]>l[0]&&(a=r[1],l=r[0]);const c=Math.atan((l[1]-a[1])/(l[0]-a[0]));for(let d=0;d<h;d++){const p=2*d*s,u=2*(d+1)*s,f=Math.sqrt(2*Math.pow(s,2)),g=[a[0]+p*Math.cos(c),a[1]+p*Math.sin(c)],k=[a[0]+u*Math.cos(c),a[1]+u*Math.sin(c)],b=[g[0]+f*Math.cos(c+Math.PI/4),g[1]+f*Math.sin(c+Math.PI/4)];n.push(...this.helper.doubleLineOps(g[0],g[1],b[0],b[1],t),...this.helper.doubleLineOps(b[0],b[1],k[0],k[1],t))}}),n}}const S={};class Ct{constructor(e){this.seed=e}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const Wt=0,tt=1,lt=2,V={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function et(o,e){return o.type===e}function st(o){const e=[],s=function(i){const h=new Array;for(;i!=="";)if(i.match(/^([ \t\r\n,]+)/))i=i.substr(RegExp.$1.length);else if(i.match(/^([aAcChHlLmMqQsStTvVzZ])/))h[h.length]={type:Wt,text:RegExp.$1},i=i.substr(RegExp.$1.length);else{if(!i.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];h[h.length]={type:tt,text:`${parseFloat(RegExp.$1)}`},i=i.substr(RegExp.$1.length)}return h[h.length]={type:lt,text:""},h}(o);let t="BOD",n=0,r=s[n];for(;!et(r,lt);){let i=0;const h=[];if(t==="BOD"){if(r.text!=="M"&&r.text!=="m")return st("M0,0"+o);n++,i=V[r.text],t=r.text}else et(r,tt)?i=V[t]:(n++,i=V[r.text],t=r.text);if(!(n+i<s.length))throw new Error("Path data ended short");for(let a=n;a<n+i;a++){const l=s[a];if(!et(l,tt))throw new Error("Param not a number: "+t+","+l.text);h[h.length]=+l.text}if(typeof V[t]!="number")throw new Error("Bad segment: "+t);{const a={key:t,data:h};e.push(a),n+=i,r=s[n],t==="M"&&(t="L"),t==="m"&&(t="l")}}return e}function ut(o){let e=0,s=0,t=0,n=0;const r=[];for(const{key:i,data:h}of o)switch(i){case"M":r.push({key:"M",data:[...h]}),[e,s]=h,[t,n]=h;break;case"m":e+=h[0],s+=h[1],r.push({key:"M",data:[e,s]}),t=e,n=s;break;case"L":r.push({key:"L",data:[...h]}),[e,s]=h;break;case"l":e+=h[0],s+=h[1],r.push({key:"L",data:[e,s]});break;case"C":r.push({key:"C",data:[...h]}),e=h[4],s=h[5];break;case"c":{const a=h.map((l,c)=>c%2?l+s:l+e);r.push({key:"C",data:a}),e=a[4],s=a[5];break}case"Q":r.push({key:"Q",data:[...h]}),e=h[2],s=h[3];break;case"q":{const a=h.map((l,c)=>c%2?l+s:l+e);r.push({key:"Q",data:a}),e=a[2],s=a[3];break}case"A":r.push({key:"A",data:[...h]}),e=h[5],s=h[6];break;case"a":e+=h[5],s+=h[6],r.push({key:"A",data:[h[0],h[1],h[2],h[3],h[4],e,s]});break;case"H":r.push({key:"H",data:[...h]}),e=h[0];break;case"h":e+=h[0],r.push({key:"H",data:[e]});break;case"V":r.push({key:"V",data:[...h]}),s=h[0];break;case"v":s+=h[0],r.push({key:"V",data:[s]});break;case"S":r.push({key:"S",data:[...h]}),e=h[2],s=h[3];break;case"s":{const a=h.map((l,c)=>c%2?l+s:l+e);r.push({key:"S",data:a}),e=a[2],s=a[3];break}case"T":r.push({key:"T",data:[...h]}),e=h[0],s=h[1];break;case"t":e+=h[0],s+=h[1],r.push({key:"T",data:[e,s]});break;case"Z":case"z":r.push({key:"Z",data:[]}),e=t,s=n}return r}function pt(o){const e=[];let s="",t=0,n=0,r=0,i=0,h=0,a=0;for(const{key:l,data:c}of o){switch(l){case"M":e.push({key:"M",data:[...c]}),[t,n]=c,[r,i]=c;break;case"C":e.push({key:"C",data:[...c]}),t=c[4],n=c[5],h=c[2],a=c[3];break;case"L":e.push({key:"L",data:[...c]}),[t,n]=c;break;case"H":t=c[0],e.push({key:"L",data:[t,n]});break;case"V":n=c[0],e.push({key:"L",data:[t,n]});break;case"S":{let d=0,p=0;s==="C"||s==="S"?(d=t+(t-h),p=n+(n-a)):(d=t,p=n),e.push({key:"C",data:[d,p,...c]}),h=c[0],a=c[1],t=c[2],n=c[3];break}case"T":{const[d,p]=c;let u=0,f=0;s==="Q"||s==="T"?(u=t+(t-h),f=n+(n-a)):(u=t,f=n);const g=t+2*(u-t)/3,k=n+2*(f-n)/3,b=d+2*(u-d)/3,M=p+2*(f-p)/3;e.push({key:"C",data:[g,k,b,M,d,p]}),h=u,a=f,t=d,n=p;break}case"Q":{const[d,p,u,f]=c,g=t+2*(d-t)/3,k=n+2*(p-n)/3,b=u+2*(d-u)/3,M=f+2*(p-f)/3;e.push({key:"C",data:[g,k,b,M,u,f]}),h=d,a=p,t=u,n=f;break}case"A":{const d=Math.abs(c[0]),p=Math.abs(c[1]),u=c[2],f=c[3],g=c[4],k=c[5],b=c[6];d===0||p===0?(e.push({key:"C",data:[t,n,k,b,k,b]}),t=k,n=b):(t!==k||n!==b)&&(ft(t,n,k,b,d,p,u,f,g).forEach(function(M){e.push({key:"C",data:M})}),t=k,n=b);break}case"Z":e.push({key:"Z",data:[]}),t=r,n=i}s=l}return e}function R(o,e,s){return[o*Math.cos(s)-e*Math.sin(s),o*Math.sin(s)+e*Math.cos(s)]}function ft(o,e,s,t,n,r,i,h,a,l){const c=(d=i,Math.PI*d/180);var d;let p=[],u=0,f=0,g=0,k=0;if(l)[u,f,g,k]=l;else{[o,e]=R(o,e,-c),[s,t]=R(s,t,-c);const T=(o-s)/2,v=(e-t)/2;let A=T*T/(n*n)+v*v/(r*r);A>1&&(A=Math.sqrt(A),n*=A,r*=A);const z=n*n,E=r*r,vt=z*E-z*v*v-E*T*T,St=z*v*v+E*T*T,ct=(h===a?-1:1)*Math.sqrt(Math.abs(vt/St));g=ct*n*v/r+(o+s)/2,k=ct*-r*T/n+(e+t)/2,u=Math.asin(parseFloat(((e-k)/r).toFixed(9))),f=Math.asin(parseFloat(((t-k)/r).toFixed(9))),o<g&&(u=Math.PI-u),s<g&&(f=Math.PI-f),u<0&&(u=2*Math.PI+u),f<0&&(f=2*Math.PI+f),a&&u>f&&(u-=2*Math.PI),!a&&f>u&&(f-=2*Math.PI)}let b=f-u;if(Math.abs(b)>120*Math.PI/180){const T=f,v=s,A=t;f=a&&f>u?u+120*Math.PI/180*1:u+120*Math.PI/180*-1,p=ft(s=g+n*Math.cos(f),t=k+r*Math.sin(f),v,A,n,r,i,0,a,[f,T,g,k])}b=f-u;const M=Math.cos(u),m=Math.sin(u),P=Math.cos(f),x=Math.sin(f),w=Math.tan(b/4),L=4/3*n*w,_=4/3*r*w,j=[o,e],D=[o+L*m,e-_*M],C=[s+L*x,t-_*P],at=[s,t];if(D[0]=2*j[0]-D[0],D[1]=2*j[1]-D[1],l)return[D,C,at].concat(p);{p=[D,C,at].concat(p);const T=[];for(let v=0;v<p.length;v+=3){const A=R(p[v][0],p[v][1],c),z=R(p[v+1][0],p[v+1][1],c),E=R(p[v+2][0],p[v+2][1],c);T.push([A[0],A[1],z[0],z[1],E[0],E[1]])}return T}}const zt={randOffset:function(o,e){return y(o,e)},randOffsetWithRange:function(o,e,s){return Q(o,e,s)},ellipse:function(o,e,s,t,n){const r=Mt(s,t,n);return nt(o,e,n,r).opset},doubleLineOps:function(o,e,s,t,n){return I(o,e,s,t,n,!0)}};function dt(o,e,s,t,n){return{type:"path",ops:I(o,e,s,t,n)}}function Z(o,e,s){const t=(o||[]).length;if(t>2){const n=[];for(let r=0;r<t-1;r++)n.push(...I(o[r][0],o[r][1],o[r+1][0],o[r+1][1],s));return e&&n.push(...I(o[t-1][0],o[t-1][1],o[0][0],o[0][1],s)),{type:"path",ops:n}}return t===2?dt(o[0][0],o[0][1],o[1][0],o[1][1],s):{type:"path",ops:[]}}function Et(o,e,s,t,n){return function(r,i){return Z(r,!0,i)}([[o,e],[o+s,e],[o+s,e+t],[o,e+t]],n)}function gt(o,e){if(o.length){const s=typeof o[0][0]=="number"?[o]:o,t=H(s[0],1*(1+.2*e.roughness),e),n=e.disableMultiStroke?[]:H(s[0],1.5*(1+.22*e.roughness),yt(e));for(let r=1;r<s.length;r++){const i=s[r];if(i.length){const h=H(i,1*(1+.2*e.roughness),e),a=e.disableMultiStroke?[]:H(i,1.5*(1+.22*e.roughness),yt(e));for(const l of h)l.op!=="move"&&t.push(l);for(const l of a)l.op!=="move"&&n.push(l)}}return{type:"path",ops:t.concat(n)}}return{type:"path",ops:[]}}function Mt(o,e,s){const t=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(o/2,2)+Math.pow(e/2,2))/2)),n=Math.ceil(Math.max(s.curveStepCount,s.curveStepCount/Math.sqrt(200)*t)),r=2*Math.PI/n;let i=Math.abs(o/2),h=Math.abs(e/2);const a=1-s.curveFitting;return i+=y(i*a,s),h+=y(h*a,s),{increment:r,rx:i,ry:h}}function nt(o,e,s,t){const[n,r]=wt(t.increment,o,e,t.rx,t.ry,1,t.increment*Q(.1,Q(.4,1,s),s),s);let i=N(n,null,s);if(!s.disableMultiStroke&&s.roughness!==0){const[h]=wt(t.increment,o,e,t.rx,t.ry,1.5,0,s),a=N(h,null,s);i=i.concat(a)}return{estimatedPoints:r,opset:{type:"path",ops:i}}}function kt(o,e,s,t,n,r,i,h,a){const l=o,c=e;let d=Math.abs(s/2),p=Math.abs(t/2);d+=y(.01*d,a),p+=y(.01*p,a);let u=n,f=r;for(;u<0;)u+=2*Math.PI,f+=2*Math.PI;f-u>2*Math.PI&&(u=0,f=2*Math.PI);const g=2*Math.PI/a.curveStepCount,k=Math.min(g/2,(f-u)/2),b=xt(k,l,c,d,p,u,f,1,a);if(!a.disableMultiStroke){const M=xt(k,l,c,d,p,u,f,1.5,a);b.push(...M)}return i&&(h?b.push(...I(l,c,l+d*Math.cos(u),c+p*Math.sin(u),a),...I(l,c,l+d*Math.cos(f),c+p*Math.sin(f),a)):b.push({op:"lineTo",data:[l,c]},{op:"lineTo",data:[l+d*Math.cos(u),c+p*Math.sin(u)]})),{type:"path",ops:b}}function bt(o,e){const s=pt(ut(st(o))),t=[];let n=[0,0],r=[0,0];for(const{key:i,data:h}of s)switch(i){case"M":r=[h[0],h[1]],n=[h[0],h[1]];break;case"L":t.push(...I(r[0],r[1],h[0],h[1],e)),r=[h[0],h[1]];break;case"C":{const[a,l,c,d,p,u]=h;t.push(...Gt(a,l,c,d,p,u,r,e)),r=[p,u];break}case"Z":t.push(...I(r[0],r[1],n[0],n[1],e)),r=[n[0],n[1]]}return{type:"path",ops:t}}function ot(o,e){const s=[];for(const t of o)if(t.length){const n=e.maxRandomnessOffset||0,r=t.length;if(r>2){s.push({op:"move",data:[t[0][0]+y(n,e),t[0][1]+y(n,e)]});for(let i=1;i<r;i++)s.push({op:"lineTo",data:[t[i][0]+y(n,e),t[i][1]+y(n,e)]})}}return{type:"fillPath",ops:s}}function G(o,e){return function(s,t){let n=s.fillStyle||"hachure";if(!S[n])switch(n){case"zigzag":S[n]||(S[n]=new Tt(t));break;case"cross-hatch":S[n]||(S[n]=new Dt(t));break;case"dots":S[n]||(S[n]=new _t(t));break;case"dashed":S[n]||(S[n]=new At(t));break;case"zigzag-line":S[n]||(S[n]=new It(t));break;default:n="hachure",S[n]||(S[n]=new Y(t))}return S[n]}(e,zt).fillPolygons(o,e)}function yt(o){const e=Object.assign({},o);return e.randomizer=void 0,o.seed&&(e.seed=o.seed+1),e}function mt(o){return o.randomizer||(o.randomizer=new Ct(o.seed||0)),o.randomizer.next()}function Q(o,e,s,t=1){return s.roughness*t*(mt(s)*(e-o)+o)}function y(o,e,s=1){return Q(-o,o,e,s)}function I(o,e,s,t,n,r=!1){const i=r?n.disableMultiStrokeFill:n.disableMultiStroke,h=rt(o,e,s,t,n,!0,!1);if(i)return h;const a=rt(o,e,s,t,n,!0,!0);return h.concat(a)}function rt(o,e,s,t,n,r,i){const h=Math.pow(o-s,2)+Math.pow(e-t,2),a=Math.sqrt(h);let l=1;l=a<200?1:a>500?.4:-.0016668*a+1.233334;let c=n.maxRandomnessOffset||0;c*c*100>h&&(c=a/10);const d=c/2,p=.2+.2*mt(n);let u=n.bowing*n.maxRandomnessOffset*(t-e)/200,f=n.bowing*n.maxRandomnessOffset*(o-s)/200;u=y(u,n,l),f=y(f,n,l);const g=[],k=()=>y(d,n,l),b=()=>y(c,n,l),M=n.preserveVertices;return i?g.push({op:"move",data:[o+(M?0:k()),e+(M?0:k())]}):g.push({op:"move",data:[o+(M?0:y(c,n,l)),e+(M?0:y(c,n,l))]}),i?g.push({op:"bcurveTo",data:[u+o+(s-o)*p+k(),f+e+(t-e)*p+k(),u+o+2*(s-o)*p+k(),f+e+2*(t-e)*p+k(),s+(M?0:k()),t+(M?0:k())]}):g.push({op:"bcurveTo",data:[u+o+(s-o)*p+b(),f+e+(t-e)*p+b(),u+o+2*(s-o)*p+b(),f+e+2*(t-e)*p+b(),s+(M?0:b()),t+(M?0:b())]}),g}function H(o,e,s){if(!o.length)return[];const t=[];t.push([o[0][0]+y(e,s),o[0][1]+y(e,s)]),t.push([o[0][0]+y(e,s),o[0][1]+y(e,s)]);for(let n=1;n<o.length;n++)t.push([o[n][0]+y(e,s),o[n][1]+y(e,s)]),n===o.length-1&&t.push([o[n][0]+y(e,s),o[n][1]+y(e,s)]);return N(t,null,s)}function N(o,e,s){const t=o.length,n=[];if(t>3){const r=[],i=1-s.curveTightness;n.push({op:"move",data:[o[1][0],o[1][1]]});for(let h=1;h+2<t;h++){const a=o[h];r[0]=[a[0],a[1]],r[1]=[a[0]+(i*o[h+1][0]-i*o[h-1][0])/6,a[1]+(i*o[h+1][1]-i*o[h-1][1])/6],r[2]=[o[h+1][0]+(i*o[h][0]-i*o[h+2][0])/6,o[h+1][1]+(i*o[h][1]-i*o[h+2][1])/6],r[3]=[o[h+1][0],o[h+1][1]],n.push({op:"bcurveTo",data:[r[1][0],r[1][1],r[2][0],r[2][1],r[3][0],r[3][1]]})}}else t===3?(n.push({op:"move",data:[o[1][0],o[1][1]]}),n.push({op:"bcurveTo",data:[o[1][0],o[1][1],o[2][0],o[2][1],o[2][0],o[2][1]]})):t===2&&n.push(...rt(o[0][0],o[0][1],o[1][0],o[1][1],s,!0,!0));return n}function wt(o,e,s,t,n,r,i,h){const a=[],l=[];if(h.roughness===0){o/=4,l.push([e+t*Math.cos(-o),s+n*Math.sin(-o)]);for(let c=0;c<=2*Math.PI;c+=o){const d=[e+t*Math.cos(c),s+n*Math.sin(c)];a.push(d),l.push(d)}l.push([e+t*Math.cos(0),s+n*Math.sin(0)]),l.push([e+t*Math.cos(o),s+n*Math.sin(o)])}else{const c=y(.5,h)-Math.PI/2;l.push([y(r,h)+e+.9*t*Math.cos(c-o),y(r,h)+s+.9*n*Math.sin(c-o)]);const d=2*Math.PI+c-.01;for(let p=c;p<d;p+=o){const u=[y(r,h)+e+t*Math.cos(p),y(r,h)+s+n*Math.sin(p)];a.push(u),l.push(u)}l.push([y(r,h)+e+t*Math.cos(c+2*Math.PI+.5*i),y(r,h)+s+n*Math.sin(c+2*Math.PI+.5*i)]),l.push([y(r,h)+e+.98*t*Math.cos(c+i),y(r,h)+s+.98*n*Math.sin(c+i)]),l.push([y(r,h)+e+.9*t*Math.cos(c+.5*i),y(r,h)+s+.9*n*Math.sin(c+.5*i)])}return[l,a]}function xt(o,e,s,t,n,r,i,h,a){const l=r+y(.1,a),c=[];c.push([y(h,a)+e+.9*t*Math.cos(l-o),y(h,a)+s+.9*n*Math.sin(l-o)]);for(let d=l;d<=i;d+=o)c.push([y(h,a)+e+t*Math.cos(d),y(h,a)+s+n*Math.sin(d)]);return c.push([e+t*Math.cos(i),s+n*Math.sin(i)]),c.push([e+t*Math.cos(i),s+n*Math.sin(i)]),N(c,null,a)}function Gt(o,e,s,t,n,r,i,h){const a=[],l=[h.maxRandomnessOffset||1,(h.maxRandomnessOffset||1)+.3];let c=[0,0];const d=h.disableMultiStroke?1:2,p=h.preserveVertices;for(let u=0;u<d;u++)u===0?a.push({op:"move",data:[i[0],i[1]]}):a.push({op:"move",data:[i[0]+(p?0:y(l[0],h)),i[1]+(p?0:y(l[0],h))]}),c=p?[n,r]:[n+y(l[u],h),r+y(l[u],h)],a.push({op:"bcurveTo",data:[o+y(l[u],h),e+y(l[u],h),s+y(l[u],h),t+y(l[u],h),c[0],c[1]]});return a}function q(o){return[...o]}function Pt(o,e=0){const s=o.length;if(s<3)throw new Error("A curve must have at least three points.");const t=[];if(s===3)t.push(q(o[0]),q(o[1]),q(o[2]),q(o[2]));else{const n=[];n.push(o[0],o[0]);for(let h=1;h<o.length;h++)n.push(o[h]),h===o.length-1&&n.push(o[h]);const r=[],i=1-e;t.push(q(n[0]));for(let h=1;h+2<n.length;h++){const a=n[h];r[0]=[a[0],a[1]],r[1]=[a[0]+(i*n[h+1][0]-i*n[h-1][0])/6,a[1]+(i*n[h+1][1]-i*n[h-1][1])/6],r[2]=[n[h+1][0]+(i*n[h][0]-i*n[h+2][0])/6,n[h+1][1]+(i*n[h][1]-i*n[h+2][1])/6],r[3]=[n[h+1][0],n[h+1][1]],t.push(r[1],r[2],r[3])}}return t}function B(o,e){return Math.pow(o[0]-e[0],2)+Math.pow(o[1]-e[1],2)}function $t(o,e,s){const t=B(e,s);if(t===0)return B(o,e);let n=((o[0]-e[0])*(s[0]-e[0])+(o[1]-e[1])*(s[1]-e[1]))/t;return n=Math.max(0,Math.min(1,n)),B(o,W(e,s,n))}function W(o,e,s){return[o[0]+(e[0]-o[0])*s,o[1]+(e[1]-o[1])*s]}function ht(o,e,s,t){const n=t||[];if(function(h,a){const l=h[a+0],c=h[a+1],d=h[a+2],p=h[a+3];let u=3*c[0]-2*l[0]-p[0];u*=u;let f=3*c[1]-2*l[1]-p[1];f*=f;let g=3*d[0]-2*p[0]-l[0];g*=g;let k=3*d[1]-2*p[1]-l[1];return k*=k,u<g&&(u=g),f<k&&(f=k),u+f}(o,e)<s){const h=o[e+0];n.length?(r=n[n.length-1],i=h,Math.sqrt(B(r,i))>1&&n.push(h)):n.push(h),n.push(o[e+3])}else{const h=o[e+0],a=o[e+1],l=o[e+2],c=o[e+3],d=W(h,a,.5),p=W(a,l,.5),u=W(l,c,.5),f=W(d,p,.5),g=W(p,u,.5),k=W(f,g,.5);ht([h,d,f,k],0,s,n),ht([k,g,u,c],0,s,n)}var r,i;return n}function Rt(o,e){return J(o,0,o.length,e)}function J(o,e,s,t,n){const r=n||[],i=o[e],h=o[s-1];let a=0,l=1;for(let c=e+1;c<s-1;++c){const d=$t(o[c],i,h);d>a&&(a=d,l=c)}return Math.sqrt(a)>t?(J(o,e,l+1,t,r),J(o,l,s,t,r)):(r.length||r.push(i),r.push(h)),r}function it(o,e=.15,s){const t=[],n=(o.length-1)/3;for(let r=0;r<n;r++)ht(o,3*r,e,t);return s&&s>0?J(t,0,t.length,s):t}const O="none";class K{constructor(e){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=e||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(e){return e?Object.assign({},this.defaultOptions,e):this.defaultOptions}_d(e,s,t){return{shape:e,sets:s||[],options:t||this.defaultOptions}}line(e,s,t,n,r){const i=this._o(r);return this._d("line",[dt(e,s,t,n,i)],i)}rectangle(e,s,t,n,r){const i=this._o(r),h=[],a=Et(e,s,t,n,i);if(i.fill){const l=[[e,s],[e+t,s],[e+t,s+n],[e,s+n]];i.fillStyle==="solid"?h.push(ot([l],i)):h.push(G([l],i))}return i.stroke!==O&&h.push(a),this._d("rectangle",h,i)}ellipse(e,s,t,n,r){const i=this._o(r),h=[],a=Mt(t,n,i),l=nt(e,s,i,a);if(i.fill)if(i.fillStyle==="solid"){const c=nt(e,s,i,a).opset;c.type="fillPath",h.push(c)}else h.push(G([l.estimatedPoints],i));return i.stroke!==O&&h.push(l.opset),this._d("ellipse",h,i)}circle(e,s,t,n){const r=this.ellipse(e,s,t,t,n);return r.shape="circle",r}linearPath(e,s){const t=this._o(s);return this._d("linearPath",[Z(e,!1,t)],t)}arc(e,s,t,n,r,i,h=!1,a){const l=this._o(a),c=[],d=kt(e,s,t,n,r,i,h,!0,l);if(h&&l.fill)if(l.fillStyle==="solid"){const p=Object.assign({},l);p.disableMultiStroke=!0;const u=kt(e,s,t,n,r,i,!0,!1,p);u.type="fillPath",c.push(u)}else c.push(function(p,u,f,g,k,b,M){const m=p,P=u;let x=Math.abs(f/2),w=Math.abs(g/2);x+=y(.01*x,M),w+=y(.01*w,M);let L=k,_=b;for(;L<0;)L+=2*Math.PI,_+=2*Math.PI;_-L>2*Math.PI&&(L=0,_=2*Math.PI);const j=(_-L)/M.curveStepCount,D=[];for(let C=L;C<=_;C+=j)D.push([m+x*Math.cos(C),P+w*Math.sin(C)]);return D.push([m+x*Math.cos(_),P+w*Math.sin(_)]),D.push([m,P]),G([D],M)}(e,s,t,n,r,i,l));return l.stroke!==O&&c.push(d),this._d("arc",c,l)}curve(e,s){const t=this._o(s),n=[],r=gt(e,t);if(t.fill&&t.fill!==O)if(t.fillStyle==="solid"){const i=gt(e,Object.assign(Object.assign({},t),{disableMultiStroke:!0,roughness:t.roughness?t.roughness+t.fillShapeRoughnessGain:0}));n.push({type:"fillPath",ops:this._mergedShape(i.ops)})}else{const i=[],h=e;if(h.length){const a=typeof h[0][0]=="number"?[h]:h;for(const l of a)l.length<3?i.push(...l):l.length===3?i.push(...it(Pt([l[0],l[0],l[1],l[2]]),10,(1+t.roughness)/2)):i.push(...it(Pt(l),10,(1+t.roughness)/2))}i.length&&n.push(G([i],t))}return t.stroke!==O&&n.push(r),this._d("curve",n,t)}polygon(e,s){const t=this._o(s),n=[],r=Z(e,!0,t);return t.fill&&(t.fillStyle==="solid"?n.push(ot([e],t)):n.push(G([e],t))),t.stroke!==O&&n.push(r),this._d("polygon",n,t)}path(e,s){const t=this._o(s),n=[];if(!e)return this._d("path",n,t);e=(e||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const r=t.fill&&t.fill!=="transparent"&&t.fill!==O,i=t.stroke!==O,h=!!(t.simplification&&t.simplification<1),a=function(c,d,p){const u=pt(ut(st(c))),f=[];let g=[],k=[0,0],b=[];const M=()=>{b.length>=4&&g.push(...it(b,d)),b=[]},m=()=>{M(),g.length&&(f.push(g),g=[])};for(const{key:x,data:w}of u)switch(x){case"M":m(),k=[w[0],w[1]],g.push(k);break;case"L":M(),g.push([w[0],w[1]]);break;case"C":if(!b.length){const L=g.length?g[g.length-1]:k;b.push([L[0],L[1]])}b.push([w[0],w[1]]),b.push([w[2],w[3]]),b.push([w[4],w[5]]);break;case"Z":M(),g.push([k[0],k[1]])}if(m(),!p)return f;const P=[];for(const x of f){const w=Rt(x,p);w.length&&P.push(w)}return P}(e,1,h?4-4*(t.simplification||1):(1+t.roughness)/2),l=bt(e,t);if(r)if(t.fillStyle==="solid")if(a.length===1){const c=bt(e,Object.assign(Object.assign({},t),{disableMultiStroke:!0,roughness:t.roughness?t.roughness+t.fillShapeRoughnessGain:0}));n.push({type:"fillPath",ops:this._mergedShape(c.ops)})}else n.push(ot(a,t));else n.push(G(a,t));return i&&(h?a.forEach(c=>{n.push(Z(c,!1,t))}):n.push(l)),this._d("path",n,t)}opsToPath(e,s){let t="";for(const n of e.ops){const r=typeof s=="number"&&s>=0?n.data.map(i=>+i.toFixed(s)):n.data;switch(n.op){case"move":t+=`M${r[0]} ${r[1]} `;break;case"bcurveTo":t+=`C${r[0]} ${r[1]}, ${r[2]} ${r[3]}, ${r[4]} ${r[5]} `;break;case"lineTo":t+=`L${r[0]} ${r[1]} `}}return t.trim()}toPaths(e){const s=e.sets||[],t=e.options||this.defaultOptions,n=[];for(const r of s){let i=null;switch(r.type){case"path":i={d:this.opsToPath(r),stroke:t.stroke,strokeWidth:t.strokeWidth,fill:O};break;case"fillPath":i={d:this.opsToPath(r),stroke:O,strokeWidth:0,fill:t.fill||O};break;case"fillSketch":i=this.fillSketch(r,t)}i&&n.push(i)}return n}fillSketch(e,s){let t=s.fillWeight;return t<0&&(t=s.strokeWidth/2),{d:this.opsToPath(e),stroke:s.fill||O,strokeWidth:t,fill:O}}_mergedShape(e){return e.filter((s,t)=>t===0||s.op!=="move")}}class qt{constructor(e,s){this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.gen=new K(s)}draw(e){const s=e.sets||[],t=e.options||this.getDefaultOptions(),n=this.ctx,r=e.options.fixedDecimalPlaceDigits;for(const i of s)switch(i.type){case"path":n.save(),n.strokeStyle=t.stroke==="none"?"transparent":t.stroke,n.lineWidth=t.strokeWidth,t.strokeLineDash&&n.setLineDash(t.strokeLineDash),t.strokeLineDashOffset&&(n.lineDashOffset=t.strokeLineDashOffset),this._drawToContext(n,i,r),n.restore();break;case"fillPath":{n.save(),n.fillStyle=t.fill||"";const h=e.shape==="curve"||e.shape==="polygon"||e.shape==="path"?"evenodd":"nonzero";this._drawToContext(n,i,r,h),n.restore();break}case"fillSketch":this.fillSketch(n,i,t)}}fillSketch(e,s,t){let n=t.fillWeight;n<0&&(n=t.strokeWidth/2),e.save(),t.fillLineDash&&e.setLineDash(t.fillLineDash),t.fillLineDashOffset&&(e.lineDashOffset=t.fillLineDashOffset),e.strokeStyle=t.fill||"",e.lineWidth=n,this._drawToContext(e,s,t.fixedDecimalPlaceDigits),e.restore()}_drawToContext(e,s,t,n="nonzero"){e.beginPath();for(const r of s.ops){const i=typeof t=="number"&&t>=0?r.data.map(h=>+h.toFixed(t)):r.data;switch(r.op){case"move":e.moveTo(i[0],i[1]);break;case"bcurveTo":e.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5]);break;case"lineTo":e.lineTo(i[0],i[1])}}s.type==="fillPath"?e.fill(n):e.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(e,s,t,n,r){const i=this.gen.line(e,s,t,n,r);return this.draw(i),i}rectangle(e,s,t,n,r){const i=this.gen.rectangle(e,s,t,n,r);return this.draw(i),i}ellipse(e,s,t,n,r){const i=this.gen.ellipse(e,s,t,n,r);return this.draw(i),i}circle(e,s,t,n){const r=this.gen.circle(e,s,t,n);return this.draw(r),r}linearPath(e,s){const t=this.gen.linearPath(e,s);return this.draw(t),t}polygon(e,s){const t=this.gen.polygon(e,s);return this.draw(t),t}arc(e,s,t,n,r,i,h=!1,a){const l=this.gen.arc(e,s,t,n,r,i,h,a);return this.draw(l),l}curve(e,s){const t=this.gen.curve(e,s);return this.draw(t),t}path(e,s){const t=this.gen.path(e,s);return this.draw(t),t}}const U="http://www.w3.org/2000/svg";class jt{constructor(e,s){this.svg=e,this.gen=new K(s)}draw(e){const s=e.sets||[],t=e.options||this.getDefaultOptions(),n=this.svg.ownerDocument||window.document,r=n.createElementNS(U,"g"),i=e.options.fixedDecimalPlaceDigits;for(const h of s){let a=null;switch(h.type){case"path":a=n.createElementNS(U,"path"),a.setAttribute("d",this.opsToPath(h,i)),a.setAttribute("stroke",t.stroke),a.setAttribute("stroke-width",t.strokeWidth+""),a.setAttribute("fill","none"),t.strokeLineDash&&a.setAttribute("stroke-dasharray",t.strokeLineDash.join(" ").trim()),t.strokeLineDashOffset&&a.setAttribute("stroke-dashoffset",`${t.strokeLineDashOffset}`);break;case"fillPath":a=n.createElementNS(U,"path"),a.setAttribute("d",this.opsToPath(h,i)),a.setAttribute("stroke","none"),a.setAttribute("stroke-width","0"),a.setAttribute("fill",t.fill||""),e.shape!=="curve"&&e.shape!=="polygon"||a.setAttribute("fill-rule","evenodd");break;case"fillSketch":a=this.fillSketch(n,h,t)}a&&r.appendChild(a)}return r}fillSketch(e,s,t){let n=t.fillWeight;n<0&&(n=t.strokeWidth/2);const r=e.createElementNS(U,"path");return r.setAttribute("d",this.opsToPath(s,t.fixedDecimalPlaceDigits)),r.setAttribute("stroke",t.fill||""),r.setAttribute("stroke-width",n+""),r.setAttribute("fill","none"),t.fillLineDash&&r.setAttribute("stroke-dasharray",t.fillLineDash.join(" ").trim()),t.fillLineDashOffset&&r.setAttribute("stroke-dashoffset",`${t.fillLineDashOffset}`),r}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(e,s){return this.gen.opsToPath(e,s)}line(e,s,t,n,r){const i=this.gen.line(e,s,t,n,r);return this.draw(i)}rectangle(e,s,t,n,r){const i=this.gen.rectangle(e,s,t,n,r);return this.draw(i)}ellipse(e,s,t,n,r){const i=this.gen.ellipse(e,s,t,n,r);return this.draw(i)}circle(e,s,t,n){const r=this.gen.circle(e,s,t,n);return this.draw(r)}linearPath(e,s){const t=this.gen.linearPath(e,s);return this.draw(t)}polygon(e,s){const t=this.gen.polygon(e,s);return this.draw(t)}arc(e,s,t,n,r,i,h=!1,a){const l=this.gen.arc(e,s,t,n,r,i,h,a);return this.draw(l)}curve(e,s){const t=this.gen.curve(e,s);return this.draw(t)}path(e,s){const t=this.gen.path(e,s);return this.draw(t)}}var Ft={canvas:(o,e)=>new qt(o,e),svg:(o,e)=>new jt(o,e),generator:o=>new K(o),newSeed:()=>K.newSeed()};export{Ft as default};
